<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--Import Google Icon Font-->
<!--     <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->

    <script type="module" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.js"></script>

    <link type="text/css" rel="stylesheet" href="../grails-app/assets/stylesheets/consoherozh.css"  media="screen,projection"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha256-t9UJPrESBeG2ojKTIcFLPGF7nHi2vEc7f5A2KpH/UBU=" crossorigin="anonymous"></script>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="https://unpkg.com/packery@2/dist/packery.pkgd.min.js"></script>
    <script src="https://unpkg.com/draggabilly@2/dist/draggabilly.pkgd.min.js"></script>
    <script src="../grails-app/assets/javascripts/utils.js"></script>
    <script src="../grails-app/assets/javascripts/bootstrap-components.js"></script>
    <script src="../grails-app/assets/javascripts/components.js"></script>
    <script src="../grails-app/assets/javascripts/consoherozh.js"></script>
  </head>

  <body>

<div class="container">

<h1>Dashboard</h1>

<div class="dashboard">

<counter-connected class="draggable" title="Linky" connected>
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</counter-connected>

<script type="text/javascript">
  querySelectorLast(document, 'counter-connected').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-12-31', value: 0 },
    { date: '2021-01-01', value: 44.2 },
    { date: '2021-01-25', value: 44.2 + 32.25}
  ]);
</script>

<counter-manual class="draggable" title="Eau">
  <ion-icon slot="icon" name="water-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</counter-manual>

<script type="text/javascript">
  querySelectorLast(document, 'counter-manual').entries = new CounterEntries("m³", "L", [
    { date: '2020-10-17', value: 25955/1000 },
    { date: '2020-11-17', value: 26500/1000 },
    { date: '2020-12-15', value: 27425/1000 },
    { date: '2021-01-07', value: 28251/1000 }
  ]);
</script>

<counter-manual class="draggable" title="Gaz">
  <ion-icon slot="icon" name="flame-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</counter-manual>

<script type="text/javascript">
  querySelectorLast(document, 'counter-manual').entries = new CounterEntries("m³", "m³", []);
</script>

  <div class="card draggable">
    <img class="card-img-top handle" src="../grails-app/assets/images/join-group.jpg" alt="Card image cap">
    <div class="card-body">
      <p class="card-text">Les ConsoHerozh : Consommateurs d’énergie responsables et informés</p>
    </div>
    <div class="card-footer" style="text-align: right;">
      <a href="https://www.facebook.com/groups/422285815424568/" target="_blank" rel="noopener noreferrer" class="btn btn-outline-secondary" role="button" >
        <ion-icon name="logo-facebook"></ion-icon>
        Rejoignez-nous !
      </a>
    </div>
  </div>

</div>

<h1>Connected counters</h1>

<div class="dashboard">

  <div class="draggable">
    <counter-connected title="Linky" connect-url="/connect">
      <ion-icon slot="icon" name="flash-outline"></ion-icon>
      <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
    </counter-connected>
    <p class="text-muted">Non connecté à Enedis</p>
  </div>

  <div class="draggable">
    <counter-connected title="Linky" connected>
      <ion-icon slot="icon" name="flash-outline"></ion-icon>
      <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
    </counter-connected>
    <p class="text-muted">Connecté, sans données</p>
  </div>

  <div class="draggable">
    <counter-connected title="Linky" connected>
      <ion-icon slot="icon" name="flash-outline"></ion-icon>
      <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
    </counter-connected>
    <p class="text-muted">Moins d’un mois de données</p>
    <script type="text/javascript">
        querySelectorLast(document, 'counter-connected').entries = new CounterEntries("kWh", "kWh", counterEntriesFromDailyConsumption(
            [{"date":"2021-01-08","value":58324.0},{"date":"2021-01-09","value":56754.0},{"date":"2021-01-10","value":64822.0},{"date":"2021-01-11","value":70420.0},{"date":"2021-01-12","value":40834.0},{"date":"2021-01-13","value":39217.0},{"date":"2021-01-14","value":26779.0},{"date":"2021-01-15","value":31408.0},{"date":"2021-01-16","value":42257.0},{"date":"2021-01-17","value":40314.0},{"date":"2021-01-18","value":52493.0},{"date":"2021-01-19","value":39620.0},{"date":"2021-01-20","value":31853.0},{"date":"2021-01-21","value":40371.0},{"date":"2021-01-22","value":33852.0},{"date":"2021-01-23","value":37198.0},{"date":"2021-01-24","value":53795.0},{"date":"2021-01-25","value":41144.0},{"date":"2021-01-26","value":64623.0},{"date":"2021-01-27","value":48033.0},{"date":"2021-01-28","value":29545.0}]
        ));
    </script>
  </div>

  <div class="draggable">
    <counter-connected title="Linky" connected>
      <ion-icon slot="icon" name="flash-outline"></ion-icon>
      <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
    </counter-connected>
    <p class="text-muted">Le 1er février</p>
    <script type="text/javascript">
        querySelectorLast(document, 'counter-connected').entries = new CounterEntries("kWh", "kWh", counterEntriesFromDailyConsumption(
            [{"date":"2021-01-08","value":58324.0},{"date":"2021-01-09","value":56754.0},{"date":"2021-01-10","value":64822.0},{"date":"2021-01-11","value":70420.0},{"date":"2021-01-12","value":40834.0},{"date":"2021-01-13","value":39217.0},{"date":"2021-01-14","value":26779.0},{"date":"2021-01-15","value":31408.0},{"date":"2021-01-16","value":42257.0},{"date":"2021-01-17","value":40314.0},{"date":"2021-01-18","value":52493.0},{"date":"2021-01-19","value":39620.0},{"date":"2021-01-20","value":31853.0},{"date":"2021-01-21","value":40371.0},{"date":"2021-01-22","value":33852.0},{"date":"2021-01-23","value":37198.0},{"date":"2021-01-24","value":53795.0},{"date":"2021-01-25","value":41144.0},{"date":"2021-01-26","value":64623.0},{"date":"2021-01-27","value":48033.0},{"date":"2021-01-28","value":29545.0},{"date":"2021-01-29","value":27238.0},{"date":"2021-01-30","value":26498.0},{"date":"2021-01-31","value":25528.0}]
        ));
    </script>
  </div>

  <div class="draggable">
    <counter-connected title="Linky" connected>
      <ion-icon slot="icon" name="flash-outline"></ion-icon>
      <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
    </counter-connected>
    <p class="text-muted">Le 2 février</p>
    <script type="text/javascript">
        querySelectorLast(document, 'counter-connected').entries = new CounterEntries("kWh", "kWh", counterEntriesFromDailyConsumption(
            [{"date":"2021-01-08","value":58324.0},{"date":"2021-01-09","value":56754.0},{"date":"2021-01-10","value":64822.0},{"date":"2021-01-11","value":70420.0},{"date":"2021-01-12","value":40834.0},{"date":"2021-01-13","value":39217.0},{"date":"2021-01-14","value":26779.0},{"date":"2021-01-15","value":31408.0},{"date":"2021-01-16","value":42257.0},{"date":"2021-01-17","value":40314.0},{"date":"2021-01-18","value":52493.0},{"date":"2021-01-19","value":39620.0},{"date":"2021-01-20","value":31853.0},{"date":"2021-01-21","value":40371.0},{"date":"2021-01-22","value":33852.0},{"date":"2021-01-23","value":37198.0},{"date":"2021-01-24","value":53795.0},{"date":"2021-01-25","value":41144.0},{"date":"2021-01-26","value":64623.0},{"date":"2021-01-27","value":48033.0},{"date":"2021-01-28","value":29545.0},{"date":"2021-01-29","value":27238.0},{"date":"2021-01-30","value":26498.0},{"date":"2021-01-31","value":25528.0},{"date":"2021-02-01","value":23297.0}]
        ));
    </script>
  </div>

</div>

<h1>Manual counters</h1>

<div class="dashboard">

<counter-manual class="draggable" title="Eau">
  <ion-icon slot="icon" name="water-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</counter-manual>

<script type="text/javascript">
  querySelectorLast(document, 'counter-manual').entries = new CounterEntries("m³", "L", [
    { date: '2020-10-17', value: 25955/1000 },
    { date: '2020-11-17', value: 26500/1000 },
    { date: '2020-12-15', value: 27425/1000 },
    { date: '2021-01-07', value: 28251/1000 }
  ]);
</script>

<counter-manual class="draggable" title="Gaz">
  <ion-icon slot="icon" name="flame-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</counter-manual>

<script type="text/javascript">
  querySelectorLast(document, 'counter-manual').entries = new CounterEntries("m³", "L", []);
</script>

</div>

<h1>Trends</h1>

<div class="dashboard">

<!-- TODO test premier février: en cours de mesure -->

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<script type="text/javascript">
  querySelectorLast(document, 'card-energy-trend').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-11-30', value: 44.2 },
    { date: '2020-12-15', value: 44.2 + 44.2}
  ]);
</script>

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<script type="text/javascript">
  querySelectorLast(document, 'card-energy-trend').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-12-31', value: 0 },
    { date: '2021-01-01', value: 44.2 },
    { date: '2021-01-25', value: 44.2 + 32.25}
  ]);

</script>

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<script type="text/javascript">
  querySelectorLast(document, 'card-energy-trend').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-12-31', value: 0 },
    { date: '2021-01-01', value: 44.00 },
    { date: '2021-01-25', value: 44.00 + 32.25}
  ]);
</script>

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<script type="text/javascript">
  querySelectorLast(document, 'card-energy-trend').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-11-01', value: 0 },
    { date: '2020-11-30', value: 32.25 },
    { date: '2020-12-15', value: 44.2 + 32.25}
  ]);
</script>

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<script type="text/javascript">
  querySelectorLast(document, 'card-energy-trend').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-11-01', value: 0 },
    { date: '2020-11-30', value: 0.1 },
    { date: '2020-12-15', value: 44.2 + 0.1}
  ]);
</script>

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<script type="text/javascript">
  querySelectorLast(document, 'card-energy-trend').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-11-01', value: 0 },
    { date: '2020-11-30', value: 44.2 },
    { date: '2020-12-15', value: 44.2 + 0.1}
  ]);
</script>

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<script type="text/javascript">
  querySelectorLast(document, 'card-energy-trend').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-11-01', value: 0 },
    { date: '2020-11-30', value: 44.2 },
    { date: '2020-12-15', value: 44.2 + 44.2}
  ]);
</script>

<card-energy-trend class="draggable" title="Électricité">
  <ion-icon slot="icon" name="flash-outline"></ion-icon>
  <ion-icon slot="handle" name="reorder-three" class="handle"></ion-icon>
</card-energy-trend>

<script type="text/javascript">
  querySelectorLast(document, 'card-energy-trend').entries = new CounterEntries("kWh", "kWh", [
    { date: '2020-11-01', value: 0 },
    { date: '2020-11-30', value: 44.2 },
    { date: '2020-12-15', value: 44.2 + 44.1}
  ]);
</script>
</div>

</div>
  </body>
</html>